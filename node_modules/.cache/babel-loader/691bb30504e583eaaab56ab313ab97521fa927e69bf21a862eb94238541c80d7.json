{"ast":null,"code":"import axios from 'axios';\nimport { setMovies, setGenres, filterMovie } from '../slice/movieSlice';\nconst BaseURL = \"http://localhost:3000/api/movies\";\nconst [value1, setvalue1] = useState(\"\");\nconst [value2, setvalue2] = useState(\"0\");\nexport const getMovies = () => async dispatch => {\n  try {\n    const {\n      data\n    } = await axios.get(BaseURL);\n    dispatch(setMovies(data));\n    return data;\n  } catch (err) {\n    return err;\n  }\n};\nexport const getMoviesBySearch = value => async dispatch => {\n  const url = BaseURL + '/search';\n  try {\n    const {\n      data\n    } = await axios.get(url, {\n      params: {\n        search: value\n      }\n    });\n    dispatch(setMovies(data));\n  } catch (err) {\n    return err;\n  }\n};\nexport const getAllGenres = () => async dispatch => {\n  const url = BaseURL + '/genres';\n  try {\n    const {\n      data\n    } = await axios.get(url);\n    dispatch(setGenres(data));\n  } catch (err) {\n    return err;\n  }\n};\n\n/*export const getMoviesByGenre = (value) => async dispatch => {\r\n    const url = BaseURL + '/genre';\r\n    try {\r\n        const {data} = await axios.get(url,{\r\n            params: {\r\n                genre: value\r\n            }\r\n        });\r\n        dispatch(setMovies(data));\r\n    }catch(err){\r\n        return err\r\n    }\r\n}\r\n\r\nexport const getMoviesByRating = (value) => async dispatch => {\r\n    const url = BaseURL + '/rating';\r\n    try {\r\n        const {data} = await axios.get(url,{\r\n            params: {\r\n                rating: value\r\n            }\r\n        });\r\n        dispatch(setMovies(data));\r\n    }catch(err){\r\n        return err\r\n    }\r\n}*/\n\nexport const getMoviesByfilter = value => async dispatch => {\n  if (value.includes(\"genre\")) {\n    let index = value.search(\":\");\n    result = value.slice(index + 1);\n    setvalue1(result);\n  } else {\n    let index = value.search(\":\");\n    result = value.slice(index + 1);\n    setvalue2(result);\n  }\n  const url = BaseURL + '/filter';\n  try {\n    const {\n      data\n    } = await axios.get(url, {\n      params: {\n        genre: value1,\n        rating: value2\n      }\n    });\n    dispatch(setMovies(data));\n  } catch (err) {\n    return err;\n  }\n};","map":{"version":3,"names":["axios","setMovies","setGenres","filterMovie","BaseURL","value1","setvalue1","useState","value2","setvalue2","getMovies","dispatch","data","get","err","getMoviesBySearch","value","url","params","search","getAllGenres","getMoviesByfilter","includes","index","result","slice","genre","rating"],"sources":["C:/Users/ASUS/Project/Web Project/Greekforgreek_project/React project/movie_search_app/src/api/movies.js"],"sourcesContent":["import axios from 'axios';\r\nimport { setMovies, setGenres, filterMovie } from '../slice/movieSlice';\r\n\r\nconst BaseURL = \"http://localhost:3000/api/movies\";\r\nconst [value1, setvalue1] = useState(\"\");\r\nconst [value2, setvalue2] = useState(\"0\");\r\n\r\nexport const getMovies = () => async dispatch => {\r\n    try {\r\n        const {data} = await axios.get(BaseURL);\r\n        dispatch(setMovies(data))\r\n        return data\r\n    }catch(err){\r\n        return err\r\n    }\r\n}\r\n\r\nexport const getMoviesBySearch = (value) => async dispatch => {\r\n    const url = BaseURL + '/search';\r\n    try {\r\n        const {data} = await axios.get(url,{\r\n            params: {\r\n                search: value\r\n            }\r\n        });\r\n        dispatch(setMovies(data));\r\n    }catch(err){\r\n        return err\r\n    }\r\n}\r\n\r\nexport const getAllGenres = () => async dispatch => {\r\n    const url = BaseURL + '/genres';\r\n    try {\r\n        const {data} = await axios.get(url);\r\n        dispatch(setGenres(data));\r\n    }catch(err){\r\n        return err\r\n    }\r\n}\r\n\r\n/*export const getMoviesByGenre = (value) => async dispatch => {\r\n    const url = BaseURL + '/genre';\r\n    try {\r\n        const {data} = await axios.get(url,{\r\n            params: {\r\n                genre: value\r\n            }\r\n        });\r\n        dispatch(setMovies(data));\r\n    }catch(err){\r\n        return err\r\n    }\r\n}\r\n\r\nexport const getMoviesByRating = (value) => async dispatch => {\r\n    const url = BaseURL + '/rating';\r\n    try {\r\n        const {data} = await axios.get(url,{\r\n            params: {\r\n                rating: value\r\n            }\r\n        });\r\n        dispatch(setMovies(data));\r\n    }catch(err){\r\n        return err\r\n    }\r\n}*/\r\n\r\nexport const getMoviesByfilter = (value) => async dispatch => {\r\n\r\n\r\n    if (value.includes(\"genre\")){\r\n        let index = value.search(\":\");\r\n        result = value.slice(index+1);\r\n        setvalue1(result)\r\n    } else{\r\n        let index =  value.search(\":\");\r\n        result = value.slice(index+1);\r\n        setvalue2(result)\r\n    }\r\n\r\n    const url = BaseURL + '/filter';\r\n\r\n    try {\r\n        const {data} = await axios.get(url,{\r\n            params: {\r\n                genre: value1,\r\n                rating: value2\r\n            }\r\n        });\r\n        dispatch(setMovies(data));\r\n    }catch(err){\r\n        return err\r\n    }\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,EAAEC,SAAS,EAAEC,WAAW,QAAQ,qBAAqB;AAEvE,MAAMC,OAAO,GAAG,kCAAkC;AAClD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGC,QAAQ,CAAC,EAAE,CAAC;AACxC,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGF,QAAQ,CAAC,GAAG,CAAC;AAEzC,OAAO,MAAMG,SAAS,GAAGA,CAAA,KAAM,MAAMC,QAAQ,IAAI;EAC7C,IAAI;IACA,MAAM;MAACC;IAAI,CAAC,GAAG,MAAMZ,KAAK,CAACa,GAAG,CAACT,OAAO,CAAC;IACvCO,QAAQ,CAACV,SAAS,CAACW,IAAI,CAAC,CAAC;IACzB,OAAOA,IAAI;EACf,CAAC,QAAME,GAAG,EAAC;IACP,OAAOA,GAAG;EACd;AACJ,CAAC;AAED,OAAO,MAAMC,iBAAiB,GAAIC,KAAK,IAAK,MAAML,QAAQ,IAAI;EAC1D,MAAMM,GAAG,GAAGb,OAAO,GAAG,SAAS;EAC/B,IAAI;IACA,MAAM;MAACQ;IAAI,CAAC,GAAG,MAAMZ,KAAK,CAACa,GAAG,CAACI,GAAG,EAAC;MAC/BC,MAAM,EAAE;QACJC,MAAM,EAAEH;MACZ;IACJ,CAAC,CAAC;IACFL,QAAQ,CAACV,SAAS,CAACW,IAAI,CAAC,CAAC;EAC7B,CAAC,QAAME,GAAG,EAAC;IACP,OAAOA,GAAG;EACd;AACJ,CAAC;AAED,OAAO,MAAMM,YAAY,GAAGA,CAAA,KAAM,MAAMT,QAAQ,IAAI;EAChD,MAAMM,GAAG,GAAGb,OAAO,GAAG,SAAS;EAC/B,IAAI;IACA,MAAM;MAACQ;IAAI,CAAC,GAAG,MAAMZ,KAAK,CAACa,GAAG,CAACI,GAAG,CAAC;IACnCN,QAAQ,CAACT,SAAS,CAACU,IAAI,CAAC,CAAC;EAC7B,CAAC,QAAME,GAAG,EAAC;IACP,OAAOA,GAAG;EACd;AACJ,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMO,iBAAiB,GAAIL,KAAK,IAAK,MAAML,QAAQ,IAAI;EAG1D,IAAIK,KAAK,CAACM,QAAQ,CAAC,OAAO,CAAC,EAAC;IACxB,IAAIC,KAAK,GAAGP,KAAK,CAACG,MAAM,CAAC,GAAG,CAAC;IAC7BK,MAAM,GAAGR,KAAK,CAACS,KAAK,CAACF,KAAK,GAAC,CAAC,CAAC;IAC7BjB,SAAS,CAACkB,MAAM,CAAC;EACrB,CAAC,MAAK;IACF,IAAID,KAAK,GAAIP,KAAK,CAACG,MAAM,CAAC,GAAG,CAAC;IAC9BK,MAAM,GAAGR,KAAK,CAACS,KAAK,CAACF,KAAK,GAAC,CAAC,CAAC;IAC7Bd,SAAS,CAACe,MAAM,CAAC;EACrB;EAEA,MAAMP,GAAG,GAAGb,OAAO,GAAG,SAAS;EAE/B,IAAI;IACA,MAAM;MAACQ;IAAI,CAAC,GAAG,MAAMZ,KAAK,CAACa,GAAG,CAACI,GAAG,EAAC;MAC/BC,MAAM,EAAE;QACJQ,KAAK,EAAErB,MAAM;QACbsB,MAAM,EAAEnB;MACZ;IACJ,CAAC,CAAC;IACFG,QAAQ,CAACV,SAAS,CAACW,IAAI,CAAC,CAAC;EAC7B,CAAC,QAAME,GAAG,EAAC;IACP,OAAOA,GAAG;EACd;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}